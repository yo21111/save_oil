<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="" />
	<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors" />
	<meta name="generator" content="Hugo 0.84.0" />
	<title>Save Oil</title>

	<!-- include summernote css/js -->

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous" />
	<link href="/css/bootstrap.min.css" rel="stylesheet" />
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	<script src="/js/summernote/summernote-lite.js"></script>
	<script src="/js/summernote/lang/summernote-ko-KR.js"></script>

	<link rel="stylesheet" href="/css/summernote/summernote-lite.css">
	<script>
		$(document).ready(function () {
			$('#summernote').summernote({
				height: 500,
				lang: "ko-KR",
			});
		});
	</script>
	<style>
		.bd-placeholder-img {
			font-size: 1.125rem;
			text-anchor: middle;
			-webkit-user-select: none;
			-moz-user-select: none;
			user-select: none;
		}

		input#searchInput {
			width: 20rem;
		}

		button#searchBtn {
			width: 5rem;
		}

		div.boardBox {
			flex-wrap: wrap;
		}

		#searchForm button,
		#searchForm input {
			margin-right: 10px;
		}

		div#navArea ul {
			padding-left: 10px;
		}

		div#navArea ul li a {
			font-size: 0.9rem;
			font-weight: bold;
		}

		input#titleInput {
			border-radius: 3px;
			border: 1px solid #aaa;
		}

		textarea#summernote {
			height: 500px;
			resize: none;
		}

		.field-error {
			border-color: #dc3545;
			color: #dc3545;
			font-weight: bold;
		}


		@media (max-width: 768px) {
			div#searchArea {
				display: none;
			}

			div#navArea ul li a {
				font-size: 0.8rem;
				transform: translateY(4px);
			}
		}

		@media (min-width: 768px) {
			.bd-placeholder-img-lg {
				font-size: 3.5rem;
			}
		}
	</style>

	<!-- Custom styles for this template -->
</head>

<body class="bg-light">
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark" aria-label="Main navigation">
		<div class="container-fluid">
			<a class="navbar-brand" href="/">Save Oil</a>
			<div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item">
						<a class="nav-link active" aria-current="page" href="/board/list">커뮤니티</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="/">주유소 검색</a>
					</li>
				</ul>
			</div>
		</div>
	</nav>

	<main class="container">
		<div class="d-flex justify-content-between align-items-center p-3 my-3 text-white bg-purple rounded shadow-sm">
			<div>
				<img id="Logo" class="me-2" src="https://ifh.cc/g/AOtB7m.png" border="0" width="58" height="48" />
			</div>
			<div>
				<form id="searchForm" class="d-flex">
					<input id="searchInput" class="form-control me-2" type="search" placeholder="검색하실 내용을 입력해주세요."
						aria-label="Search" name="search" />
					<button id="searchBtn" class="btn btn-dark" type="button">검색</button>
				</form>
			</div>
		</div>

		<div class="boardBox my-3 p-3 bg-body rounded shadow-sm">
			<!-- "${user.sex == 'M' ? '남자' : '여자' }" -->
			<form id="boardForm" method="post" th:object="${board}">
				<h3>게시글 작성</h3>
				<!-- 수정 또는 등록 시 -->
				<div th:errors="*{title}" class="field-error">
					제목 미입력 오류메시지
				</div>
				<input id="titleInput" th:field="*{title}" th:errorclass="field-error" type="text"
					class="mb-3 w-100 p-2" placeholder="제목을 입력해주세요." />
				<textarea name="content" th:field="*{content}" wrap="hard" id="summernote"
					placeholder="내용을 입력해주세요."></textarea>
				<div class="d-flex justify-content-end mt-3" id="buttonArea">
					<button th:text="*{wNo ne null ? '수정' : '등록'}" class="btn btn-outline-dark mr-2" id="submitBtn"
						type="button">수정</button>
					<a href="/board/list" class="btn btn-outline-dark" type="button">목록</a>
				</div>
			</form>
		</div>
	</main>

	<script th:inline="javascript">
		$(function () {
			$("button#searchBtn").click(function () {
				let search = $("input#searchInput").val().trim();

				$("form#searchForm").attr("action", "/board/list?search=" + search);
				$("form#searchForm").submit();
			});

			$("button#submitBtn").click(function () {
				let text = $(this).text();
				if (text == '수정') {
					let wNo = /*[[${board.wNo}]]*/0;
					$("form#boardForm").attr("action", "/board/rewrite/" + wNo);
				} else {
					$("form#boardForm").attr("action", "/board/write");
				}
				let data = $("#summernote").text();
				data = data.replace(/&amp;/g, "&").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"').replace(/&#40;/g, '(').replace(/&#41;/g, ')').replace(/&#35;/g, '#');
				$("#summernote").text(data);
				$("form#boardForm").submit();
			});
		});
	</script>
</body>

</html>